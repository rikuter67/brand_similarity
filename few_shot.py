# few_shot_prompts.py

FEW_SHOT_EXAMPLES_DATA = [
    {
        "example_bline_name": "コム デ ギャルソン",
        "example_existing_desc": "コム デ ギャルソン(COMME des GARÇONS)は日本のファッションブランド。創業者でデザイナーの川久保玲。ギャルソンのスタイルは、社会に流されることのない、自立した女性像をデザインに落とし込んだもので、従来型の女性らしさのない、ルーズなシルエットに黒などモノトーンな色を多様、孤高の女性を描いた。パリでの最初のコレクションはセンセーショナルで、賛否両論。穴の開いたセーターや黒を用いたファッションを発表し「黒の衝撃」と言われ批判を受けたが、アバンギャルドかつクラッシックなスタイルは徐々に受け入れられていった。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "コム デ ギャルソンは、川久保玲が手掛ける日本の革新的なファッションブランド。そのキースタイルは、既存の美の概念に挑戦し続けるアバンギャルド精神にあり、黒を基調としたモノトーンの色使い、左右非対称なカッティング、未完成に見えるディテール、そして身体のラインを意図的に曖昧にするルーズなシルエットが特徴です。代表的なアイテムには、独創的なフォルムのジャケットやドレス、穴あきニット、再構築されたシャツなどがあり、既成概念を打ち破るデザインが常に注目を集めます。素材はウールギャバジンやポリエステル縮絨など、独自の加工を施したものが多く用いられ、そのテクスチャー自体もデザインの一部となっています。ターゲット顧客層は、流行に左右されず、自身の強い意志と個性をファッションを通じて表現したいと考える、アートや思想に関心の高い人々と言えるでしょう。"
    },
    {
        "example_bline_name": "アンダーカバー",
        "example_existing_desc": "アンダーカバーのデザインについてデザイナー本人はストリートとモードの間にあると語る。「セックス ピストルズ」に強く影響を受けていること、本人もパンクの影響を非常に受けていると語るようにパンクファッション的なテイストがアンダーカバーのファッションにも見られるが、いわゆるパンクテイストのファッションではない。何重にも重ねられたレイヤード調のものに、独特なカラープリント、フェミニンなスタイル、シャビールックなどのデストロイ系のものなどテーマに合わせて様々な手法を試みている。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "アンダーカバーは、デザイナー高橋盾が手掛ける、ストリートとモードの境界線を独自の視点で探求する日本のファッションブランド。キースタイル/コンセプトは「WE MAKE NOISE NOT CLOTHES」を掲げ、パンクやロックミュージック、アート、サブカルチャーからの影響を色濃く反映しつつ、ダークでどこか退廃的、しかし同時に繊細な美しさも併せ持つ独創的な世界観を構築しています。代表的なアイテムとしては、グラフィックプリントTシャツ、複雑なレイヤードが可能なジャケットやコート、ダメージ加工や再構築が施されたデニム製品などがあります。素材や色使いの特徴としては、黒や深みのある色を基調としながらも、時に鮮やかな色彩やダークなユーモアを感じさせるプリントでアクセントを加えます。ターゲット顧客層は、既存の価値観にとらわれず、ファッションを通じて自己のアイデンティティや反骨精神を表現したいと考える、カルチャーに敏感な人々です。"
    },
    {
        "example_bline_name": "ラッド ミュージシャン",
        "example_existing_desc": "ラッド ミュージシャンは、〈音楽と洋服の融合〉を基本コンセプトにしたブランド。音から得られる目に見えない様々なインスピレーションを洋服という形のあるものにするラッド ミュージシャンの提案するライフスタイルは、性別、国境、年齢そして宗教も超えた自由な世界。落ち込んだ時に救ってくれる音楽のように、着る人にとってライフ ラインとなるレーベルを目指す。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ラッド ミュージシャンは、「音楽と洋服の融合」を基本コンセプトに、ミニマルで退廃的な美意識を追求する日本のファッションブランド。キースタイルは、ロックミュージックの持つ刹那的で内省的な雰囲気を、シャープで洗練されたシルエットと繊細なディテールで表現することにあります。代表的なアイテムには、身体に沿うようなタイトフィットのジャケットやスラックス、花柄や抽象的なグラフィックがプリントされたシャツ、上質なウールやギャバジンを使用したコートなどが挙げられます。素材や色使いの特徴としては、黒を基調としたモノトーンパレットが多く、時に深紅や紫といったアクセントカラーが用いられ、素材そのものの質感やドレープ性を重視したアイテムが展開されます。ターゲット顧客層は、音楽、特にロックやオルタナティブミュージックに深い造詣を持ち、ファッションを通じて自身の内面性や美意識を静かに主張したいと考える、繊細な感性を持つ人々です。"
    },
    {
        "example_bline_name": "マックイーン", # アレキサンダー・マックイーン
        "example_existing_desc": "マックイーン(McQUEEN)はイギリス、ロンドンを拠点とするファッションブランド。ブランドを設立したデザイナーはアレキサンダー・マックイーン。サヴィル・ロウの仕立職人の見習いからキャリアをスタート。92年、自身のブランドを立ち上げ、96年にはジバンシィのデザイナーに抜擢された。2010年にアレキサンダー・マックイーンが死去した後、サラ・バートンがクリエイティブ・ディレクターに就任。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "マックイーン（アレキサンダー・マックイーン）は、英国の伝統的なテーラリング技術と前衛的なデザインを融合させ、ドラマティックでしばしば挑発的なコレクションを展開するロンドン発のブランド。キースタイルは、破壊と再生、光と闇、自然と人工といった対比的な要素を探求し、ロマンティシズムとダークな感性が共存する独創的な美学を表現します。スカルプリント、極端なシルエットのドレス、精巧な刺繍や装飾が施されたジャケットなどが代表的。素材はシルク、レザー、レースなど高級素材を多用し、黒や鮮血のような赤、対照的な白など劇的な色彩が用いられることが多い。既成概念にとらわれず、強い自己表現を求めるファッション愛好家や、物語性のある服を好む層に支持されています。"
    },
    {
        "example_bline_name": "ヨウジヤマモト",
        "example_existing_desc": "ヨウジヤマモト(Yohji Yamamoto)は山本耀司が設立したファッションブランド。81年に発表したパリコレクションで当時タブーとされていた“黒”を前面に押し出したショウを発表し、“黒の衝撃”と称され一大旋風を巻き起こす。山本のデザインは、アシメトリックなカッティング、身体と服の間に空気をはらむようなシルエットは、ボディコンシャスな時代のファッションの慣習を覆すものだった。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ヨウジヤマモトは、デザイナー山本耀司による、アンチテーゼの精神と日本の伝統美を融合させた前衛的なファッションブランド。キースタイルは、「黒の衝撃」と評されたように黒を基調とし、身体のラインをあえて隠すようなビッグシルエットやアシンメトリーなカッティング、ドレープを多用した流動的なフォルムが特徴です。代表的なアイテムには、複雑なパターンが生み出すロングコートやワイドパンツ、ユニセックスなデザインのシャツなどがあり、ジェンダーの境界を曖昧にするスタイルも提案します。素材はウールギャバジンやリネン、コットンなど天然素材の風合いを重視し、時にダメージ加工や手作業によるディテールが加えられます。既存の西洋的な美意識に疑問を投げかけ、独自の哲学を持つ知的な層や、服を通じて自己の内面を表現したいと考える人々に深く支持されています。"
    },
    {
        "example_bline_name": "ジル サンダー",
        "example_existing_desc": "ジル サンダーはMs.ジル・サンダー(Jil Sander)が設立したファッションブランド。彼女のデザインの特徴である洗練されて繊細、かつ品質にこだわったミニマルなデザインが、本当の意味で認められるのは90年代。ラフ シモンズがクリエイティブ・ディレクターを務めた時期もあり、ミニマルなデザインを打ち出す。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ジル サンダーは、ドイツ発のミニマリズムを代表するファッションブランド。キースタイル/コンセプトは、純粋さ、品質、そして知的な抑制美を追求し、不要な装飾を削ぎ落としたクリーンで洗練されたデザインが特徴です。代表的なアイテムとして、完璧なカッティングのシャツ、構築的なシルエットのコート、上質な素材感を生かしたニットウェアなどが挙げられます。素材や色使いの特徴は、カシミア、ウール、シルク、コットンなどの高品質な天然素材を好み、ニュートラルカラー（白、黒、ベージュ、ネイビーなど）を基調とした落ち着いたパレットが中心です。ターゲット顧客層は、本質的な価値を理解し、流行に左右されないタイムレスなエレガンスを求める、知的な審美眼を持つ大人の男女に支持されています。"
    },
    {
        "example_bline_name": "ケンゾー",
        "example_existing_desc": "高田賢三(Kenzo Takada)が設立。パリでブティックをオープンし、1970S/Sコレクションを行う。お金がなかったので日本から和服の生地を取り寄せて服を使ったが、それが功を奏して、着物地のワンピースが「ELLE」の表紙を飾る。新しいものを多く採り入れ、ファッションの既成概念をことごとく打ち崩した。花柄を多用し、カラフルな色彩、世界の民族衣装も積極的に採り入れる。ペザントルックやレイヤード等、和洋折衷の妙に溢れた独自の作風と色彩の斬新さでモード界に多大な影響を与えた。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ケンゾーは、高田賢三によってパリで設立された、自由で大胆な精神を体現するファッションブランド。キースタイル/コンセプトは、東洋と西洋の文化を融合させ、自然や旅からインスピレーションを得た、カラフルでエネルギッシュなデザインが特徴です。代表的なアイテムには、鮮やかな花柄や動物モチーフのプリントが施されたスウェットシャツやドレス、民族衣装の要素を取り入れたリラックス感のあるシルエットのウェアなどがあります。素材や色使いの特徴としては、コットンやシルクなどの天然素材を用い、赤、青、緑、黄色といった原色を大胆に組み合わせたり、多様なプリントパターンを駆使したりすることで、ポジティブで遊び心あふれる世界観を表現します。ターゲット顧客層は、楽観的で冒険心があり、ファッションを通じて喜びや個性を表現したいと考える、若々しい感性を持つ人々です。"
    },
    {
        "example_bline_name": "ラルフ ローレン",
        "example_existing_desc": "イギリスの伝統的なファッションをアメリカ流にアレンジした、アメリカントラッド、アイビーファッションの中心的なブランド。ラルフローレンが考える、アメリカのより豊かで理想的なライフスタイルを提案する。それは一言で表現すると、上流階級の持つスタイルである。1967年、贅沢な素材を用いた4インチ幅のワイドタイのブランド「POLO(ポロ)」を発表し、話題を呼ぶ。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ラルフ ローレンは、アメリカの伝統的なスタイルをモダンに昇華させ、洗練されたライフスタイルを提案する象徴的なブランド。キースタイル/コンセプトは、東海岸のプレッピー文化、英国紳士のクラシシズム、そしてアメリカ西部のロマンティシズムを融合させた、オーセンティックでタイムレスなエレガンスを追求します。代表的なアイテムとして、ポロシャツ、オックスフォードシャツ、ケーブルニットセーター、ブレザー、そして精巧なイブニングウェアが挙げられます。素材や色使いの特徴は、上質なコットン、リネン、カシミア、レザーなどを用い、ネイビー、白、カーキといったクラシックなカラーを基調にしつつ、時に大胆なストライプやチェック柄、馬術モチーフなどを取り入れます。ターゲット顧客層は、伝統と品質を重んじ、上品で洗練されたスタイルを好む、幅広い年齢層の男女に支持されています。"
    },
    {
        "example_bline_name": "マルニ",
        "example_existing_desc": "コンスエロ・カスティリオーニは1994年「マルニ」と命名したブランドを夫の会社「CiwiFurs」のファミリービジネスの一環として立ち上げる。ミラノを拠点とし当初は毛皮と革製品のみのラインナップであった。マルニのコレクションは、ボリュームの使い方と構築的なシルエットが高く評価されている。それに加え、シフォンなど柔らかいイメージの素材に、花柄のプリント、チェック、ストライプなどさまざまなデザインを取り入れた上品で可愛らしいスタイル。雰囲気としてどこか温かみがあるところが特徴。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "マルニは、コンスエロ・カスティリオーニによって設立されたイタリアのファッションブランド。キースタイル/コンセプトは、大胆なプリント、独特な色使い、そして実験的なシルエットを融合させ、知的でアーティスティックな遊び心あふれるコレクションを展開します。代表的なアイテムには、ボリュームのあるコクーンシルエットのコートやドレス、グラフィカルなパターンのニットウェア、そして存在感のあるチャンキーなジュエリーやプラットフォームシューズなどがあります。素材や色使いの特徴としては、高品質なコットン、シルク、ウールに加え、テクニカルな素材も用い、意外性のある色の組み合わせや、抽象的な花柄、幾何学模様のプリントが多用されます。ターゲット顧客層は、ファッションを通じて自己の知性やクリエイティビティを表現したいと考える、アートやデザインに関心が高い、洗練された個性を持つ女性たちです。"
    },
    {
        "example_bline_name": "ステラ マッカートニー",
        "example_existing_desc": "ステラマッカートニーの特徴は、セクシーでシャープなテーラリングにフェミニンを融合させたスタイル。97年、カール ラガーフェルドの後任としてクロエのクリエイティヴ・ディレクターに大抜擢される。2001年、グッチグループの後押しのもと、自身のブランド「ステラ マッカートニー」を設立。2005年、アディダスとコラボレートしたブランド「アディダス・バイ・ステラ マッカートニー(Adidas by Stella McCartney)」を発表。", # 実際のデータから主要部分を抜粋・要約
        "example_generated_style_desc": "ステラ マッカートニーは、サステナビリティとエシカルな価値観を追求する、英国発のラグジュアリーファッションブランド。キースタイル/コンセプトは、シャープなテーラリングとリラックスしたフェミニティを融合させ、エフォートレスでありながらも洗練された現代的な女性像を提案します。特筆すべきは、レザーやファーを一切使用しないクルエルティフリーの姿勢です。代表的なアイテムには、美しいシルエットのスーツやコート、遊び心のあるプリントドレス、そしてアイコンバッグ「ファラベラ」などが挙げられます。素材や色使いの特徴としては、オーガニックコットン、リサイクル素材、再生セルロース繊維などを積極的に採用し、ニュートラルカラーをベースにしながらも、時にポップな色使いやアニマルプリント（フェイク）でアクセントを加えます。ターゲット顧客層は、環境意識が高く、倫理的な消費に関心を持ちながらも、モダンでスタイリッシュなファッションを楽しみたいと考える、自立した女性たちです。"
    }
]


# --- プロンプトテンプレートの定義 ---
# A. 既存の説明文が非常に長く、情報が豊富な場合のプロンプト (要約・再構成を重視)
PROMPT_TEMPLATE_SUMMARIZE_RESTRUCTURE = """あなたはプロのファッションエディターです。以下のブランドライン名と非常に詳細な既存の説明文を読み、このブランドラインのファッションスタイルがより具体的に理解できるように、特に下記の4つの観点を中心に情報を抽出し、要約・再構成して、魅力的なブランド紹介文を新たに日本語で生成してください。元の説明文が歴史や事実に偏っている場合は、スタイルに関する記述を最優先し、その他の情報は簡潔にまとめてください。

[特に重視・抽出する観点]
1. キースタイル/コンセプト: (ブランドの全体的な雰囲気やデザイン哲学、キーワードなど)
2. 代表的なアイテム: (ブランドを象徴する具体的な商品群やカテゴリ)
3. 素材や色使いの特徴: (よく用いられる素材感や色の傾向、特徴的な柄など)
4. ターゲット顧客層のイメージ: (どのような人に支持されていそうか、ライフスタイルなど)

[生成するブランド紹介文の条件]
- 上記4つの観点を自然な形で盛り込んでください。
- FASHION PRESSの記事のような、客観的かつ魅力的な文体で記述してください。
- 全体として、400～600字程度の文章を目指してください。
- 既存の説明文が長すぎる場合は、上記観点に合致する情報を優先的に抽出し、冗長な歴史的記述は大幅に省略してください。

{few_shot_examples_formatted}
"""

# B. 既存の説明文が中程度で、スタイル情報が不足している場合のプロンプト (補完・生成を重視)
PROMPT_TEMPLATE_GENERATE_COMPLEMENT = """あなたはプロのファッションエディターです。以下のブランドライン名と既存の説明文を参考に、このブランドラインのファッションスタイルがより具体的に理解できるように、特に下記の4つの観点を積極的に補完・生成し、魅力的なブランド紹介文を新たに日本語で生成してください。

[特に補完・生成してほしい観点]
1. キースタイル/コンセプト: (ブランドの全体的な雰囲気やデザイン哲学、キーワードなど)
2. 代表的なアイテム: (ブランドを象徴する具体的な商品群やカテゴリ)
3. 素材や色使いの特徴: (よく用いられる素材感や色の傾向、特徴的な柄など)
4. ターゲット顧客層のイメージ: (どのような人に支持されていそうか、ライフスタイルなど)

[生成するブランド紹介文の条件]
- 上記4つの観点を創造的に、しかしブランドラインのイメージから大きく逸脱しない範囲で生成・補完してください。
- 既存の説明文の情報も適切に活用してください。
- FASHION PRESSの記事のような、客観的かつ魅力的な文体で記述してください。
- 全体として、300～500字程度の文章を目指してください。

{few_shot_examples_formatted}
"""

# C. 既存の説明文がほぼない(または非常に短い)場合のプロンプト (完全新規生成を重視)
PROMPT_TEMPLATE_GENERATE_NEW = """あなたはプロのファッションエディターです。以下のブランドライン名のみを主な手がかりとして、このブランドラインのファッションスタイルが具体的に理解できるような、魅力的なブランド紹介文を新たに日本語で生成してください。特に下記の4つの観点を想像力を働かせて記述してください。

[記述してほしい観点]
1. キースタイル/コンセプト: (ブランドの全体的な雰囲気やデザイン哲学、キーワードなど)
2. 代表的なアイテム: (ブランドを象徴する具体的な商品群やカテゴリ)
3. 素材や色使いの特徴: (よく用いられる素材感や色の傾向、特徴的な柄など)
4. ターゲット顧客層のイメージ: (どのような人に支持されていそうか、ライフスタイルなど)

[ブランドライン名]: {bline_name}

[生成するブランド紹介文の条件]
- 上記4つの観点を創造的に生成してください。
- FASHION PRESSの記事のような、客観的かつ魅力的な文体で記述してください。
- 全体として、300～500字程度の文章を目指してください。

{few_shot_examples_formatted_for_new_generation}
"""

# --- 事前要約用のプロンプト ---
PROMPT_PRE_SUMMARY = """以下の非常に長いブランド説明文を読み、このブランドのファッションスタイル（キースタイル/コンセプト、代表的なアイテム、素材や色使いの特徴、ターゲット顧客層のイメージなど）に関連する可能性のある情報を中心に、客観的な事実に基づいて400字程度で要約してください。歴史的経緯やデザイナーの個人的なエピソードよりも、ブランドのファッション的特徴がわかる情報を優先してください。

[既存の説明文]
{long_description}

[要約文]
"""


def get_formatted_few_shot_examples(bline_name_for_current_prompt, existing_desc_for_current_prompt):
    few_shot_string = ""
    selected_examples = FEW_SHOT_EXAMPLES_DATA[:3] 
    for i, ex in enumerate(selected_examples):
        few_shot_string += f"例{i+1}:\n"
        few_shot_string += f"ブランドライン名: {ex['example_bline_name']}\n"
        few_shot_string += f"既存の説明文: {ex['example_existing_desc']}\n"
        few_shot_string += f"[生成するブランド紹介文]\n{ex['example_generated_style_desc']}\n\n"
    few_shot_string += "---\n実際の入力:\n"
    few_shot_string += f"ブランドライン名: {bline_name_for_current_prompt}\n"
    few_shot_string += f"既存の説明文: {existing_desc_for_current_prompt}\n"
    few_shot_string += "[生成するブランド紹介文]:\n"
    return few_shot_string

def get_formatted_few_shot_examples_for_new_generation(bline_name_for_current_prompt):
    few_shot_string = ""
    selected_examples = FEW_SHOT_EXAMPLES_DATA[:3]
    for i, ex in enumerate(selected_examples):
        few_shot_string += f"例{i+1}:\n"
        few_shot_string += f"ブランドライン名: {ex['example_bline_name']}\n"
        few_shot_string += f"既存の説明文: {ex['example_existing_desc']}\n"
        few_shot_string += f"[生成するブランド紹介文]\n{ex['example_generated_style_desc']}\n\n"
    few_shot_string += "---\n実際の入力:\n"
    few_shot_string += f"ブランドライン名: {bline_name_for_current_prompt}\n"
    few_shot_string += "既存の説明文: (特になし)\n"
    few_shot_string += "[生成するブランド紹介文]:\n"
    return few_shot_string